
    <!DOCTYPE html>
    <html>
    <head>
        <meta charset="utf-8">
        <title>IB Computer Science HL - Criterion C Report</title>
        <style>
            @media print {
                @page {
                    size: A4;
                    margin: 2cm;
                }
                
                body {
                    font-family: 'Times New Roman', serif;
                    font-size: 12pt;
                    line-height: 1.5;
                    color: #000;
                }
                
                h1 {
                    font-size: 18pt;
                    color: #000;
                    border-bottom: 2px solid #000;
                    page-break-before: always;
                    margin-top: 0;
                }
                
                h1:first-child {
                    page-break-before: auto;
                }
                
                h2 {
                    font-size: 16pt;
                    color: #000;
                    border-bottom: 1px solid #000;
                    margin-top: 20pt;
                }
                
                h3 {
                    font-size: 14pt;
                    color: #000;
                    margin-top: 15pt;
                }
                
                h4 {
                    font-size: 13pt;
                    color: #000;
                    margin-top: 10pt;
                }
                
                code {
                    font-family: 'Courier New', monospace;
                    font-size: 10pt;
                    background-color: #f5f5f5;
                    padding: 1px 3px;
                }
                
                pre {
                    font-family: 'Courier New', monospace;
                    font-size: 9pt;
                    background-color: #f5f5f5;
                    padding: 10pt;
                    border: 1px solid #ccc;
                    page-break-inside: avoid;
                    overflow-x: auto;
                }
                
                table {
                    border-collapse: collapse;
                    width: 100%;
                    font-size: 10pt;
                    page-break-inside: avoid;
                }
                
                th, td {
                    border: 1px solid #000;
                    padding: 5pt;
                    text-align: left;
                }
                
                th {
                    background-color: #f0f0f0;
                    font-weight: bold;
                }
                
                ul, ol {
                    margin: 10pt 0;
                    padding-left: 20pt;
                }
                
                li {
                    margin: 3pt 0;
                }
                
                blockquote {
                    border-left: 3px solid #000;
                    margin: 10pt 0;
                    padding: 5pt 10pt;
                    background-color: #f9f9f9;
                }
            }
            
            @media screen {
                body {
                    font-family: Arial, sans-serif;
                    max-width: 800px;
                    margin: 0 auto;
                    padding: 20px;
                    line-height: 1.6;
                }
                
                h1 {
                    color: #2c3e50;
                    border-bottom: 3px solid #3498db;
                }
                
                h2 {
                    color: #34495e;
                    border-bottom: 2px solid #ecf0f1;
                }
                
                code {
                    background-color: #f8f9fa;
                    padding: 2px 4px;
                    border-radius: 3px;
                }
                
                pre {
                    background-color: #f8f9fa;
                    padding: 15px;
                    border-radius: 5px;
                    overflow-x: auto;
                }
                
                table {
                    border-collapse: collapse;
                    width: 100%;
                }
                
                th, td {
                    border: 1px solid #ddd;
                    padding: 8px;
                    text-align: left;
                }
                
                th {
                    background-color: #f2f2f2;
                }
            }
        </style>
    </head>
    <body>
        <h1 id="ib-computer-science-hl-internal-assessment">IB Computer Science HL Internal Assessment</h1>
<h2 id="criterion-c-development">Criterion C: Development</h2>
<p><strong>Student:</strong> [Your Name]<br />
<strong>Candidate Number:</strong> [Your Candidate Number]<br />
<strong>Project:</strong> PawPal - Dog Walking App<br />
<strong>Technology Stack:</strong> Flutter/Dart, Firebase Firestore, Google Maps API</p>
<hr />
<h2 id="table-of-contents">Table of Contents</h2>
<ol>
<li><a href="#project-overview">Project Overview</a></li>
<li><a href="#development-environment">Development Environment</a></li>
<li><a href="#algorithm-analysis">Algorithm Analysis</a></li>
<li><a href="#data-structures">Data Structures</a></li>
<li><a href="#database-design-and-operations">Database Design and Operations</a></li>
<li><a href="#user-interface-implementation">User Interface Implementation</a></li>
<li><a href="#validation-and-error-handling">Validation and Error Handling</a></li>
<li><a href="#performance-optimization">Performance Optimization</a></li>
<li><a href="#code-quality-and-architecture">Code Quality and Architecture</a></li>
<li><a href="#testing-and-debugging">Testing and Debugging</a></li>
</ol>
<hr />
<h2 id="project-overview">Project Overview</h2>
<p>The PawPal application is a comprehensive dog walking service platform built using Flutter and Firebase. The application connects dog owners with professional dog walkers through an intelligent matching system that considers multiple factors including location, schedule compatibility, experience level, and user preferences.</p>
<h3 id="key-features-implemented">Key Features Implemented:</h3>
<ul>
<li><strong>User Authentication System</strong> with role-based access (Dog Owner/Dog Walker)</li>
<li><strong>Intelligent Matching Algorithm</strong> using weighted scoring and optimization techniques</li>
<li><strong>Real-time Chat System</strong> for communication between users</li>
<li><strong>Geolocation Services</strong> with distance calculations</li>
<li><strong>Profile Management</strong> for users and dogs</li>
<li><strong>Walk Request Management</strong> with status tracking</li>
<li><strong>Review and Rating System</strong></li>
</ul>
<hr />
<h2 id="development-environment">Development Environment</h2>
<h3 id="integrated-development-environment-ide">Integrated Development Environment (IDE)</h3>
<ul>
<li><strong>Primary IDE:</strong> Visual Studio Code with Flutter extensions</li>
<li><strong>Flutter SDK:</strong> Version 3.16.0</li>
<li><strong>Dart SDK:</strong> Version 3.2.0</li>
<li><strong>Platform Support:</strong> Android, iOS, Web, macOS, Windows, Linux</li>
</ul>
<h3 id="dependencies-and-libraries">Dependencies and Libraries</h3>
<div class="codehilite"><pre><span></span><code><span class="nt">dependencies</span><span class="p">:</span>
<span class="w">  </span><span class="nt">flutter</span><span class="p">:</span>
<span class="w">    </span><span class="nt">sdk</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">flutter</span>
<span class="w">  </span><span class="nt">firebase_core</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">^2.24.2</span>
<span class="w">  </span><span class="nt">firebase_auth</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">^4.15.3</span>
<span class="w">  </span><span class="nt">cloud_firestore</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">^4.13.6</span>
<span class="w">  </span><span class="nt">google_maps_flutter</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">^2.5.0</span>
<span class="w">  </span><span class="nt">geolocator</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">^10.1.0</span>
<span class="w">  </span><span class="nt">provider</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">^6.1.1</span>
<span class="w">  </span><span class="nt">intl</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">^0.19.0</span>
</code></pre></div>

<h3 id="project-structure">Project Structure</h3>
<div class="codehilite"><pre><span></span><code>lib/
├── models/           # Data models and domain objects
├── screens/          # UI screens and pages
├── services/         # Business logic and API services
├── utils/            # Utility functions and validators
├── widgets/          # Reusable UI components
└── l10n/            # Internationalization
</code></pre></div>

<hr />
<h2 id="algorithm-analysis">Algorithm Analysis</h2>
<h3 id="1-haversine-distance-calculation-algorithm">1. Haversine Distance Calculation Algorithm</h3>
<p><strong>Purpose:</strong> Calculate the great-circle distance between two geographical points on Earth.</p>
<p><strong>Implementation:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="kd">static</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">calculateDistance</span><span class="p">(</span><span class="n">GeoPoint</span><span class="w"> </span><span class="n">point1</span><span class="p">,</span><span class="w"> </span><span class="n">GeoPoint</span><span class="w"> </span><span class="n">point2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">lat1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">point1</span><span class="p">.</span><span class="n">latitude</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">pi</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">180</span><span class="p">;</span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">lat2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">point2</span><span class="p">.</span><span class="n">latitude</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">pi</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">180</span><span class="p">;</span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">deltaLat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">point2</span><span class="p">.</span><span class="n">latitude</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">point1</span><span class="p">.</span><span class="n">latitude</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">pi</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">180</span><span class="p">;</span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">deltaLon</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">point2</span><span class="p">.</span><span class="n">longitude</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">point1</span><span class="p">.</span><span class="n">longitude</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">pi</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">180</span><span class="p">;</span>

<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sin</span><span class="p">(</span><span class="n">deltaLat</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">sin</span><span class="p">(</span><span class="n">deltaLat</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="w"> </span><span class="o">+</span>
<span class="w">      </span><span class="n">cos</span><span class="p">(</span><span class="n">lat1</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">cos</span><span class="p">(</span><span class="n">lat2</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">sin</span><span class="p">(</span><span class="n">deltaLon</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">sin</span><span class="p">(</span><span class="n">deltaLon</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">2</span><span class="p">);</span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">atan2</span><span class="p">(</span><span class="n">sqrt</span><span class="p">(</span><span class="n">a</span><span class="p">),</span><span class="w"> </span><span class="n">sqrt</span><span class="p">(</span><span class="m">1</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">a</span><span class="p">));</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">_earthRadius</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">c</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Algorithm Complexity:</strong>
- <strong>Time Complexity:</strong> O(1) - Constant time operation
- <strong>Space Complexity:</strong> O(1) - No additional space required
- <strong>Mathematical Formula:</strong> Haversine formula for spherical geometry</p>
<p><strong>Explanation:</strong> The algorithm converts latitude and longitude coordinates from degrees to radians, then applies the Haversine formula to calculate the shortest distance between two points on a sphere. This is essential for determining proximity between dog owners and walkers.</p>
<h3 id="2-weighted-matching-algorithm">2. Weighted Matching Algorithm</h3>
<p><strong>Purpose:</strong> Match dog walkers with walk requests based on multiple weighted criteria.</p>
<p><strong>Implementation:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="kd">static</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">Map</span><span class="o">&lt;</span><span class="kt">String</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="o">&gt;</span><span class="w"> </span><span class="n">_matchingWeights</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="s1">&#39;distance&#39;</span><span class="o">:</span><span class="w"> </span><span class="m">0.25</span><span class="p">,</span><span class="w">        </span><span class="c1">// 25% - Geographic proximity</span>
<span class="w">  </span><span class="s1">&#39;dogSize&#39;</span><span class="o">:</span><span class="w"> </span><span class="m">0.20</span><span class="p">,</span><span class="w">         </span><span class="c1">// 20% - Dog size compatibility</span>
<span class="w">  </span><span class="s1">&#39;schedule&#39;</span><span class="o">:</span><span class="w"> </span><span class="m">0.20</span><span class="p">,</span><span class="w">        </span><span class="c1">// 20% - Time availability</span>
<span class="w">  </span><span class="s1">&#39;experience&#39;</span><span class="o">:</span><span class="w"> </span><span class="m">0.15</span><span class="p">,</span><span class="w">      </span><span class="c1">// 15% - Walker experience level</span>
<span class="w">  </span><span class="s1">&#39;rating&#39;</span><span class="o">:</span><span class="w"> </span><span class="m">0.10</span><span class="p">,</span><span class="w">          </span><span class="c1">// 10% - User rating</span>
<span class="w">  </span><span class="s1">&#39;price&#39;</span><span class="o">:</span><span class="w"> </span><span class="m">0.10</span><span class="p">,</span><span class="w">           </span><span class="c1">// 10% - Price compatibility</span>
<span class="p">};</span>

<span class="kd">static</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">_calculateOverallMatchScore</span><span class="p">(</span>
<span class="w">  </span><span class="n">UserModel</span><span class="w"> </span><span class="n">walker</span><span class="p">,</span>
<span class="w">  </span><span class="n">WalkRequestModel</span><span class="w"> </span><span class="n">walkRequest</span><span class="p">,</span>
<span class="w">  </span><span class="n">UserModel</span><span class="w"> </span><span class="n">owner</span><span class="p">,</span>
<span class="w">  </span><span class="n">DogModel</span><span class="w"> </span><span class="n">dog</span><span class="p">,</span>
<span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// Calculate individual factor scores</span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">distance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">calculateDistance</span><span class="p">(</span><span class="n">walker</span><span class="p">.</span><span class="n">location</span><span class="o">!</span><span class="p">,</span><span class="w"> </span><span class="n">owner</span><span class="p">.</span><span class="n">location</span><span class="o">!</span><span class="p">);</span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">distanceScore</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">calculateDistanceScore</span><span class="p">(</span><span class="n">distance</span><span class="p">,</span><span class="w"> </span><span class="n">walker</span><span class="p">.</span><span class="n">maxDistance</span><span class="p">);</span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">dogSizeScore</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">calculateDogSizeScore</span><span class="p">(</span><span class="n">walker</span><span class="p">.</span><span class="n">preferredDogSizes</span><span class="p">,</span><span class="w"> </span><span class="n">dog</span><span class="p">.</span><span class="n">size</span><span class="p">);</span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">scheduleScore</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">calculateScheduleScore</span><span class="p">(</span><span class="cm">/* parameters */</span><span class="p">);</span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">experienceScore</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">calculateExperienceScore</span><span class="p">(</span><span class="n">walker</span><span class="p">.</span><span class="n">experienceLevel</span><span class="p">,</span><span class="w"> </span><span class="n">dog</span><span class="p">);</span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">ratingScore</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">calculateRatingScore</span><span class="p">(</span><span class="n">walker</span><span class="p">.</span><span class="n">rating</span><span class="p">);</span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">priceScore</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">calculatePriceScore</span><span class="p">(</span><span class="n">walker</span><span class="p">.</span><span class="n">hourlyRate</span><span class="p">,</span><span class="w"> </span><span class="n">walkRequest</span><span class="p">.</span><span class="n">budget</span><span class="w"> </span><span class="o">??</span><span class="w"> </span><span class="m">50.0</span><span class="p">,</span><span class="w"> </span><span class="m">0.5</span><span class="p">);</span>

<span class="w">  </span><span class="c1">// Calculate weighted sum</span>
<span class="w">  </span><span class="kt">double</span><span class="w"> </span><span class="n">totalScore</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.0</span><span class="p">;</span>
<span class="w">  </span><span class="n">totalScore</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">distanceScore</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">_matchingWeights</span><span class="p">[</span><span class="s1">&#39;distance&#39;</span><span class="p">]</span><span class="o">!</span><span class="p">;</span>
<span class="w">  </span><span class="n">totalScore</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">dogSizeScore</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">_matchingWeights</span><span class="p">[</span><span class="s1">&#39;dogSize&#39;</span><span class="p">]</span><span class="o">!</span><span class="p">;</span>
<span class="w">  </span><span class="n">totalScore</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">scheduleScore</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">_matchingWeights</span><span class="p">[</span><span class="s1">&#39;schedule&#39;</span><span class="p">]</span><span class="o">!</span><span class="p">;</span>
<span class="w">  </span><span class="n">totalScore</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">experienceScore</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">_matchingWeights</span><span class="p">[</span><span class="s1">&#39;experience&#39;</span><span class="p">]</span><span class="o">!</span><span class="p">;</span>
<span class="w">  </span><span class="n">totalScore</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">ratingScore</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">_matchingWeights</span><span class="p">[</span><span class="s1">&#39;rating&#39;</span><span class="p">]</span><span class="o">!</span><span class="p">;</span>
<span class="w">  </span><span class="n">totalScore</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">priceScore</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">_matchingWeights</span><span class="p">[</span><span class="s1">&#39;price&#39;</span><span class="p">]</span><span class="o">!</span><span class="p">;</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">totalScore</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">totalWeight</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Algorithm Complexity:</strong>
- <strong>Time Complexity:</strong> O(n) where n is the number of walkers
- <strong>Space Complexity:</strong> O(n) for storing match results
- <strong>Optimization:</strong> Only processes walkers with score &gt; 0.3 threshold</p>
<p><strong>Explanation:</strong> This algorithm implements a multi-criteria decision-making approach where each factor (distance, compatibility, schedule, etc.) is assigned a weight and scored independently. The final score is a weighted average of all factors, providing a comprehensive matching solution.</p>
<h3 id="3-hungarian-algorithm-for-optimal-assignment">3. Hungarian Algorithm for Optimal Assignment</h3>
<p><strong>Purpose:</strong> Find the optimal 1:1 assignment between walkers and walk requests to minimize total cost.</p>
<p><strong>Implementation:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="kd">static</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">_hungarianAlgorithm</span><span class="p">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">costMatrix</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">costMatrix</span><span class="p">.</span><span class="n">length</span><span class="p">;</span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">assignment</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">List</span><span class="p">.</span><span class="n">generate</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="o">-</span><span class="m">1</span><span class="p">);</span>

<span class="w">  </span><span class="n">_subtractRowMinima</span><span class="p">(</span><span class="n">costMatrix</span><span class="p">);</span>
<span class="w">  </span><span class="n">_subtractColMinima</span><span class="p">(</span><span class="n">costMatrix</span><span class="p">);</span>

<span class="w">  </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="kc">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">rowCover</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">List</span><span class="p">.</span><span class="n">filled</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">);</span>
<span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">colCover</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">List</span><span class="p">.</span><span class="n">filled</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Find initial assignments</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">n</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">n</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">costMatrix</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">rowCover</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">colCover</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="n">assignment</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">j</span><span class="p">;</span>
<span class="w">          </span><span class="n">rowCover</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">;</span>
<span class="w">          </span><span class="n">colCover</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">rowCover</span><span class="p">.</span><span class="n">every</span><span class="p">((</span><span class="n">cover</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">cover</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">1</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">break</span><span class="p">;</span><span class="w"> </span><span class="c1">// All rows covered</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Find minimum uncovered value and adjust matrix</span>
<span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">uncoveredRows</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>
<span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">uncoveredCols</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">n</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">rowCover</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="n">uncoveredRows</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">colCover</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="n">uncoveredCols</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">minUncovered</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">double</span><span class="p">.</span><span class="n">infinity</span><span class="p">;</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">uncoveredRows</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">uncoveredCols</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">costMatrix</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">minUncovered</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="n">minUncovered</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">costMatrix</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">];</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Adjust matrix</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">uncoveredRows</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">n</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">costMatrix</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="n">minUncovered</span><span class="p">;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">uncoveredCols</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">n</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">costMatrix</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">minUncovered</span><span class="p">;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">assignment</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Algorithm Complexity:</strong>
- <strong>Time Complexity:</strong> O(n³) - Cubic time complexity
- <strong>Space Complexity:</strong> O(n²) - For cost matrix storage
- <strong>Use Case:</strong> Optimal assignment when perfect 1:1 matching is required</p>
<p><strong>Explanation:</strong> The Hungarian algorithm solves the assignment problem by finding the minimum cost assignment in a bipartite graph. It uses matrix operations to systematically find the optimal solution, ensuring no walker is assigned to multiple requests and no request is assigned to multiple walkers.</p>
<h3 id="4-exponential-decay-scoring">4. Exponential Decay Scoring</h3>
<p><strong>Purpose:</strong> Calculate distance-based scores using exponential decay to prevent abrupt score drops.</p>
<p><strong>Implementation:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="kd">static</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">calculateDistanceScore</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">distance</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">maxDistance</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">distance</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="m">1.0</span><span class="p">;</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">distance</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">maxDistance</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="m">0.0</span><span class="p">;</span>

<span class="w">  </span><span class="c1">// Exponential decay: closer distances get higher scores</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">distance</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="n">maxDistance</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m">0.3</span><span class="p">));</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Algorithm Complexity:</strong>
- <strong>Time Complexity:</strong> O(1) - Constant time
- <strong>Space Complexity:</strong> O(1) - No additional space
- <strong>Mathematical Formula:</strong> f(x) = e^(-x/(maxDistance * 0.3))</p>
<p><strong>Explanation:</strong> This algorithm provides smooth score transitions for distance-based matching. Instead of linear scoring, it uses exponential decay to give higher scores to closer matches while still providing reasonable scores for moderately distant matches.</p>
<hr />
<h2 id="data-structures">Data Structures</h2>
<h3 id="1-user-model-with-enums">1. User Model with Enums</h3>
<div class="codehilite"><pre><span></span><code><span class="n">enum</span><span class="w"> </span><span class="n">UserType</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">dogOwner</span><span class="p">,</span><span class="w"> </span><span class="n">dogWalker</span><span class="w"> </span><span class="p">}</span>
<span class="n">enum</span><span class="w"> </span><span class="n">DogSize</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">small</span><span class="p">,</span><span class="w"> </span><span class="n">medium</span><span class="p">,</span><span class="w"> </span><span class="n">large</span><span class="w"> </span><span class="p">}</span>
<span class="n">enum</span><span class="w"> </span><span class="n">ExperienceLevel</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">beginner</span><span class="p">,</span><span class="w"> </span><span class="n">intermediate</span><span class="p">,</span><span class="w"> </span><span class="n">expert</span><span class="w"> </span><span class="p">}</span>

<span class="kd">class</span><span class="w"> </span><span class="nc">UserModel</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="kt">String</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="kt">String</span><span class="w"> </span><span class="n">email</span><span class="p">;</span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="kt">String</span><span class="w"> </span><span class="n">fullName</span><span class="p">;</span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="kt">String</span><span class="w"> </span><span class="n">phoneNumber</span><span class="p">;</span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">UserType</span><span class="w"> </span><span class="n">userType</span><span class="p">;</span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">GeoPoint</span><span class="o">?</span><span class="w"> </span><span class="n">location</span><span class="p">;</span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">DogSize</span><span class="o">&gt;</span><span class="w"> </span><span class="n">preferredDogSizes</span><span class="p">;</span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">ExperienceLevel</span><span class="w"> </span><span class="n">experienceLevel</span><span class="p">;</span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">hourlyRate</span><span class="p">;</span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="kt">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">preferredTimeSlots</span><span class="p">;</span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">availableDays</span><span class="p">;</span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">maxDistance</span><span class="p">;</span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">rating</span><span class="p">;</span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">totalWalks</span><span class="p">;</span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="kt">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">specializations</span><span class="p">;</span>
<span class="w">  </span><span class="c1">// ... additional fields</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Design Rationale:</strong>
- <strong>Enums for Type Safety:</strong> Prevents invalid values and provides compile-time checking
- <strong>Immutable Fields:</strong> All fields are <code>final</code> to prevent accidental modifications
- <strong>GeoPoint Integration:</strong> Uses Firestore's GeoPoint for efficient geospatial queries
- <strong>List-based Preferences:</strong> Allows multiple selections for flexible matching</p>
<h3 id="2-dog-model-with-complex-attributes">2. Dog Model with Complex Attributes</h3>
<div class="codehilite"><pre><span></span><code><span class="n">enum</span><span class="w"> </span><span class="n">DogTemperament</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">calm</span><span class="p">,</span><span class="w"> </span><span class="n">friendly</span><span class="p">,</span><span class="w"> </span><span class="n">energetic</span><span class="p">,</span><span class="w"> </span><span class="n">shy</span><span class="p">,</span><span class="w"> </span><span class="n">aggressive</span><span class="p">,</span><span class="w"> </span><span class="n">reactive</span><span class="w"> </span><span class="p">}</span>
<span class="n">enum</span><span class="w"> </span><span class="n">EnergyLevel</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">low</span><span class="p">,</span><span class="w"> </span><span class="n">medium</span><span class="p">,</span><span class="w"> </span><span class="n">high</span><span class="p">,</span><span class="w"> </span><span class="n">veryHigh</span><span class="w"> </span><span class="p">}</span>
<span class="n">enum</span><span class="w"> </span><span class="n">SpecialNeeds</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">none</span><span class="p">,</span><span class="w"> </span><span class="n">medication</span><span class="p">,</span><span class="w"> </span><span class="n">elderly</span><span class="p">,</span><span class="w"> </span><span class="n">puppy</span><span class="p">,</span><span class="w"> </span><span class="n">training</span><span class="p">,</span><span class="w"> </span><span class="n">socializing</span><span class="w"> </span><span class="p">}</span>

<span class="kd">class</span><span class="w"> </span><span class="nc">DogModel</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="kt">String</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="kt">String</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="kt">String</span><span class="w"> </span><span class="n">breed</span><span class="p">;</span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">age</span><span class="p">;</span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="kt">String</span><span class="w"> </span><span class="n">ownerId</span><span class="p">;</span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">DogSize</span><span class="w"> </span><span class="n">size</span><span class="p">;</span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">DogTemperament</span><span class="w"> </span><span class="n">temperament</span><span class="p">;</span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">EnergyLevel</span><span class="w"> </span><span class="n">energyLevel</span><span class="p">;</span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">SpecialNeeds</span><span class="o">&gt;</span><span class="w"> </span><span class="n">specialNeeds</span><span class="p">;</span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">weight</span><span class="p">;</span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">isNeutered</span><span class="p">;</span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="kt">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">medicalConditions</span><span class="p">;</span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="kt">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">trainingCommands</span><span class="p">;</span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">isGoodWithOtherDogs</span><span class="p">;</span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">isGoodWithChildren</span><span class="p">;</span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">isGoodWithStrangers</span><span class="p">;</span>
<span class="w">  </span><span class="c1">// ... additional fields</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Design Rationale:</strong>
- <strong>Comprehensive Dog Profiling:</strong> Captures all relevant information for matching
- <strong>Enum-based Categorization:</strong> Ensures consistent data entry and easy filtering
- <strong>Boolean Flags:</strong> Simple yes/no attributes for behavioral characteristics
- <strong>List-based Complex Attributes:</strong> Handles multiple special needs and medical conditions</p>
<h3 id="3-walk-request-state-machine">3. Walk Request State Machine</h3>
<div class="codehilite"><pre><span></span><code><span class="n">enum</span><span class="w"> </span><span class="n">WalkRequestStatus</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">pending</span><span class="p">,</span><span class="w"> </span><span class="n">accepted</span><span class="p">,</span><span class="w"> </span><span class="n">completed</span><span class="p">,</span><span class="w"> </span><span class="n">cancelled</span><span class="w"> </span><span class="p">}</span>

<span class="kd">class</span><span class="w"> </span><span class="nc">WalkRequestModel</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="kt">String</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="kt">String</span><span class="w"> </span><span class="n">ownerId</span><span class="p">;</span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="kt">String</span><span class="o">?</span><span class="w"> </span><span class="n">walkerId</span><span class="p">;</span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="kt">String</span><span class="w"> </span><span class="n">dogId</span><span class="p">;</span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">DateTime</span><span class="w"> </span><span class="n">time</span><span class="p">;</span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="kt">String</span><span class="w"> </span><span class="n">location</span><span class="p">;</span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="kt">String</span><span class="o">?</span><span class="w"> </span><span class="n">notes</span><span class="p">;</span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">WalkRequestStatus</span><span class="w"> </span><span class="n">status</span><span class="p">;</span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">duration</span><span class="p">;</span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="kt">double</span><span class="o">?</span><span class="w"> </span><span class="n">budget</span><span class="p">;</span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">DateTime</span><span class="w"> </span><span class="n">createdAt</span><span class="p">;</span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">DateTime</span><span class="w"> </span><span class="n">updatedAt</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Design Rationale:</strong>
- <strong>State Machine Pattern:</strong> Clear status transitions prevent invalid state changes
- <strong>Optional Walker Assignment:</strong> Allows pending requests without assigned walkers
- <strong>Timestamp Tracking:</strong> Audit trail for request lifecycle management
- <strong>Flexible Duration:</strong> Integer minutes for precise scheduling</p>
<hr />
<h2 id="database-design-and-operations">Database Design and Operations</h2>
<h3 id="1-firestore-collection-structure">1. Firestore Collection Structure</h3>
<div class="codehilite"><pre><span></span><code>Firestore Database:
├── users/
│   ├── {userId}/
│   │   ├── id: string
│   │   ├── email: string
│   │   ├── userType: string
│   │   ├── location: GeoPoint
│   │   └── ... other fields
├── dogs/
│   ├── {dogId}/
│   │   ├── ownerId: string
│   │   ├── name: string
│   │   ├── size: string
│   │   └── ... other fields
├── walk_requests/
│   ├── {requestId}/
│   │   ├── ownerId: string
│   │   ├── walkerId: string (optional)
│   │   ├── status: string
│   │   └── ... other fields
└── chats/
    ├── {chatId}/
    │   ├── messages/
    │   │   └── {messageId}/
    │   │       ├── senderId: string
    │   │       ├── content: string
    │   │       └── timestamp: Timestamp
</code></pre></div>

<h3 id="2-crud-operations-implementation">2. CRUD Operations Implementation</h3>
<p><strong>Create Operations:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="c1">// User Creation</span>
<span class="n">Future</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span><span class="w"> </span><span class="n">createUser</span><span class="p">(</span><span class="n">UserModel</span><span class="w"> </span><span class="n">user</span><span class="p">)</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">await</span><span class="w"> </span><span class="n">usersCollection</span><span class="p">.</span><span class="n">doc</span><span class="p">(</span><span class="n">user</span><span class="p">.</span><span class="n">id</span><span class="p">).</span><span class="kd">set</span><span class="p">(</span><span class="n">user</span><span class="p">.</span><span class="n">toFirestore</span><span class="p">());</span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">print</span><span class="p">(</span><span class="s1">&#39;Error creating user: </span><span class="si">$</span><span class="n">e</span><span class="s1">&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="k">rethrow</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Walk Request Creation</span>
<span class="n">Future</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span><span class="w"> </span><span class="n">addWalkRequest</span><span class="p">(</span><span class="n">WalkRequestModel</span><span class="w"> </span><span class="n">request</span><span class="p">)</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">await</span><span class="w"> </span><span class="n">walkRequestsCollection</span><span class="p">.</span><span class="n">doc</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="n">id</span><span class="p">).</span><span class="kd">set</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="n">toFirestore</span><span class="p">());</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Read Operations:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="c1">// Get User by ID</span>
<span class="n">Future</span><span class="o">&lt;</span><span class="n">UserModel</span><span class="o">?&gt;</span><span class="w"> </span><span class="n">getUserById</span><span class="p">(</span><span class="kt">String</span><span class="w"> </span><span class="n">userId</span><span class="p">)</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">DocumentSnapshot</span><span class="w"> </span><span class="n">doc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">await</span><span class="w"> </span><span class="n">usersCollection</span><span class="p">.</span><span class="n">doc</span><span class="p">(</span><span class="n">userId</span><span class="p">).</span><span class="kd">get</span><span class="p">();</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">doc</span><span class="p">.</span><span class="n">exists</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="n">UserModel</span><span class="p">.</span><span class="n">fromFirestore</span><span class="p">(</span><span class="n">doc</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">print</span><span class="p">(</span><span class="s1">&#39;Error fetching user: </span><span class="si">$</span><span class="n">e</span><span class="s1">&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Get All Walkers with Filtering</span>
<span class="n">Future</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">UserModel</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">getAllWalkers</span><span class="p">()</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">QuerySnapshot</span><span class="w"> </span><span class="n">querySnapshot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">await</span><span class="w"> </span><span class="n">usersCollection</span>
<span class="w">        </span><span class="p">.</span><span class="n">where</span><span class="p">(</span><span class="s1">&#39;userType&#39;</span><span class="p">,</span><span class="w"> </span><span class="nl">isEqualTo:</span><span class="w"> </span><span class="s1">&#39;dogWalker&#39;</span><span class="p">)</span>
<span class="w">        </span><span class="p">.</span><span class="kd">get</span><span class="p">();</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">querySnapshot</span><span class="p">.</span><span class="n">docs</span>
<span class="w">        </span><span class="p">.</span><span class="n">map</span><span class="p">((</span><span class="n">doc</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">UserModel</span><span class="p">.</span><span class="n">fromFirestore</span><span class="p">(</span><span class="n">doc</span><span class="p">))</span>
<span class="w">        </span><span class="p">.</span><span class="n">where</span><span class="p">((</span><span class="n">user</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span>
<span class="w">        </span><span class="p">.</span><span class="n">cast</span><span class="o">&lt;</span><span class="n">UserModel</span><span class="o">&gt;</span><span class="p">()</span>
<span class="w">        </span><span class="p">.</span><span class="n">toList</span><span class="p">();</span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">print</span><span class="p">(</span><span class="s1">&#39;Error fetching walkers: </span><span class="si">$</span><span class="n">e</span><span class="s1">&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">[];</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Update Operations:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="c1">// Update User Profile</span>
<span class="n">Future</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span><span class="w"> </span><span class="n">updateUser</span><span class="p">(</span><span class="n">UserModel</span><span class="w"> </span><span class="n">user</span><span class="p">)</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">await</span><span class="w"> </span><span class="n">usersCollection</span><span class="p">.</span><span class="n">doc</span><span class="p">(</span><span class="n">user</span><span class="p">.</span><span class="n">id</span><span class="p">).</span><span class="n">update</span><span class="p">(</span><span class="n">user</span><span class="p">.</span><span class="n">toFirestore</span><span class="p">());</span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">print</span><span class="p">(</span><span class="s1">&#39;Error updating user: </span><span class="si">$</span><span class="n">e</span><span class="s1">&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="k">rethrow</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Update Walk Request Status</span>
<span class="n">Future</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span><span class="w"> </span><span class="n">updateWalkRequest</span><span class="p">(</span><span class="n">WalkRequestModel</span><span class="w"> </span><span class="n">request</span><span class="p">)</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">await</span><span class="w"> </span><span class="n">walkRequestsCollection</span><span class="p">.</span><span class="n">doc</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="n">id</span><span class="p">).</span><span class="n">update</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="n">toFirestore</span><span class="p">());</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Delete Operations:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="c1">// Delete User</span>
<span class="n">Future</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span><span class="w"> </span><span class="n">deleteUser</span><span class="p">(</span><span class="kt">String</span><span class="w"> </span><span class="n">userId</span><span class="p">)</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">await</span><span class="w"> </span><span class="n">usersCollection</span><span class="p">.</span><span class="n">doc</span><span class="p">(</span><span class="n">userId</span><span class="p">).</span><span class="n">delete</span><span class="p">();</span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">print</span><span class="p">(</span><span class="s1">&#39;Error deleting user: </span><span class="si">$</span><span class="n">e</span><span class="s1">&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="k">rethrow</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Delete Walk Request</span>
<span class="n">Future</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span><span class="w"> </span><span class="n">deleteWalkRequest</span><span class="p">(</span><span class="kt">String</span><span class="w"> </span><span class="n">requestId</span><span class="p">)</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">await</span><span class="w"> </span><span class="n">walkRequestsCollection</span><span class="p">.</span><span class="n">doc</span><span class="p">(</span><span class="n">requestId</span><span class="p">).</span><span class="n">delete</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="3-query-optimization-strategies">3. Query Optimization Strategies</h3>
<p><strong>Indexed Queries:</strong>
- User type filtering: <code>where('userType', isEqualTo: 'dogWalker')</code>
- Status-based filtering: <code>where('status', isEqualTo: 'pending')</code>
- Owner-specific queries: <code>where('ownerId', isEqualTo: ownerId)</code></p>
<p><strong>Memory-based Sorting:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="c1">// Sort in memory to avoid index requirements</span>
<span class="kd">final</span><span class="w"> </span><span class="n">requests</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">querySnapshot</span><span class="p">.</span><span class="n">docs</span>
<span class="w">    </span><span class="p">.</span><span class="n">map</span><span class="p">((</span><span class="n">doc</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">WalkRequestModel</span><span class="p">.</span><span class="n">fromFirestore</span><span class="p">(</span><span class="n">doc</span><span class="p">))</span>
<span class="w">    </span><span class="p">.</span><span class="n">toList</span><span class="p">();</span>

<span class="c1">// Sort by time descending</span>
<span class="n">requests</span><span class="p">.</span><span class="n">sort</span><span class="p">((</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">time</span><span class="p">.</span><span class="n">compareTo</span><span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">time</span><span class="p">));</span>
</code></pre></div>

<p><strong>Pagination Implementation:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="c1">// Limit results to prevent large data transfers</span>
<span class="kd">final</span><span class="w"> </span><span class="n">querySnapshot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">await</span><span class="w"> </span><span class="n">walkRequestsCollection</span>
<span class="w">    </span><span class="p">.</span><span class="n">where</span><span class="p">(</span><span class="s1">&#39;walkerId&#39;</span><span class="p">,</span><span class="w"> </span><span class="nl">isEqualTo:</span><span class="w"> </span><span class="n">walkerId</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="n">limit</span><span class="p">(</span><span class="m">20</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="kd">get</span><span class="p">();</span>
</code></pre></div>

<hr />
<h2 id="user-interface-implementation">User Interface Implementation</h2>
<h3 id="1-screen-architecture">1. Screen Architecture</h3>
<p>The application follows a hierarchical screen structure with clear navigation patterns:</p>
<div class="codehilite"><pre><span></span><code>AuthWrapper
├── LoginScreen
├── SignupScreen
└── HomeScreen
    ├── DogListScreen
    ├── WalkRequestFormScreen
    ├── WalkRequestListScreen
    ├── WalkRequestDetailScreen
    ├── SmartMatchingScreen
    ├── OptimizedMatchingScreen
    ├── ChatListScreen
    ├── ChatScreen
    ├── ProfileScreen
    └── SettingsScreen
</code></pre></div>

<h3 id="2-state-management-with-provider">2. State Management with Provider</h3>
<div class="codehilite"><pre><span></span><code><span class="kd">class</span><span class="w"> </span><span class="nc">AuthProvider</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">ChangeNotifier</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">AuthService</span><span class="w"> </span><span class="n">_authService</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AuthService</span><span class="p">();</span>
<span class="w">  </span><span class="n">User</span><span class="o">?</span><span class="w"> </span><span class="n">_user</span><span class="p">;</span>
<span class="w">  </span><span class="n">UserModel</span><span class="o">?</span><span class="w"> </span><span class="n">_userModel</span><span class="p">;</span>
<span class="w">  </span><span class="kt">bool</span><span class="w"> </span><span class="n">_isLoading</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>

<span class="w">  </span><span class="n">User</span><span class="o">?</span><span class="w"> </span><span class="kd">get</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">_user</span><span class="p">;</span>
<span class="w">  </span><span class="n">UserModel</span><span class="o">?</span><span class="w"> </span><span class="kd">get</span><span class="w"> </span><span class="n">userModel</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">_userModel</span><span class="p">;</span>
<span class="w">  </span><span class="kt">bool</span><span class="w"> </span><span class="kd">get</span><span class="w"> </span><span class="n">isLoading</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">_isLoading</span><span class="p">;</span>

<span class="w">  </span><span class="n">Future</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span><span class="w"> </span><span class="n">signIn</span><span class="p">(</span><span class="kt">String</span><span class="w"> </span><span class="n">email</span><span class="p">,</span><span class="w"> </span><span class="kt">String</span><span class="w"> </span><span class="n">password</span><span class="p">)</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">_isLoading</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<span class="w">    </span><span class="n">notifyListeners</span><span class="p">();</span>

<span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kd">final</span><span class="w"> </span><span class="n">userCredential</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">await</span><span class="w"> </span><span class="n">_authService</span><span class="p">.</span><span class="n">signInWithEmailAndPassword</span><span class="p">(</span>
<span class="w">        </span><span class="nl">email:</span><span class="w"> </span><span class="n">email</span><span class="p">,</span>
<span class="w">        </span><span class="nl">password:</span><span class="w"> </span><span class="n">password</span><span class="p">,</span>
<span class="w">      </span><span class="p">);</span>
<span class="w">      </span><span class="n">_user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">userCredential</span><span class="p">.</span><span class="n">user</span><span class="p">;</span>
<span class="w">      </span><span class="n">_userModel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">await</span><span class="w"> </span><span class="n">_authService</span><span class="p">.</span><span class="n">getUserModel</span><span class="p">(</span><span class="n">_user</span><span class="o">!</span><span class="p">.</span><span class="n">uid</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">throw</span><span class="w"> </span><span class="n">Exception</span><span class="p">(</span><span class="s1">&#39;Sign in failed: </span><span class="si">$</span><span class="n">e</span><span class="s1">&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">finally</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">_isLoading</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<span class="w">      </span><span class="n">notifyListeners</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="3-responsive-design-implementation">3. Responsive Design Implementation</h3>
<div class="codehilite"><pre><span></span><code><span class="kd">class</span><span class="w"> </span><span class="nc">ResponsiveLayout</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">StatelessWidget</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">Widget</span><span class="w"> </span><span class="n">mobile</span><span class="p">;</span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">Widget</span><span class="o">?</span><span class="w"> </span><span class="n">tablet</span><span class="p">;</span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">Widget</span><span class="o">?</span><span class="w"> </span><span class="n">desktop</span><span class="p">;</span>

<span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="n">ResponsiveLayout</span><span class="p">({</span>
<span class="w">    </span><span class="n">Key</span><span class="o">?</span><span class="w"> </span><span class="n">key</span><span class="p">,</span>
<span class="w">    </span><span class="kd">required</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="n">mobile</span><span class="p">,</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="n">tablet</span><span class="p">,</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="n">desktop</span><span class="p">,</span>
<span class="w">  </span><span class="p">})</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">super</span><span class="p">(</span><span class="nl">key:</span><span class="w"> </span><span class="n">key</span><span class="p">);</span>

<span class="w">  </span><span class="nd">@override</span>
<span class="w">  </span><span class="n">Widget</span><span class="w"> </span><span class="n">build</span><span class="p">(</span><span class="n">BuildContext</span><span class="w"> </span><span class="n">context</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">LayoutBuilder</span><span class="p">(</span>
<span class="w">      </span><span class="nl">builder:</span><span class="w"> </span><span class="p">(</span><span class="n">context</span><span class="p">,</span><span class="w"> </span><span class="n">constraints</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">constraints</span><span class="p">.</span><span class="n">maxWidth</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="m">1200</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="k">return</span><span class="w"> </span><span class="n">desktop</span><span class="w"> </span><span class="o">??</span><span class="w"> </span><span class="n">tablet</span><span class="w"> </span><span class="o">??</span><span class="w"> </span><span class="n">mobile</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">constraints</span><span class="p">.</span><span class="n">maxWidth</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="m">800</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="k">return</span><span class="w"> </span><span class="n">tablet</span><span class="w"> </span><span class="o">??</span><span class="w"> </span><span class="n">mobile</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="k">return</span><span class="w"> </span><span class="n">mobile</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">    </span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<hr />
<h2 id="validation-and-error-handling">Validation and Error Handling</h2>
<h3 id="1-form-validation-system">1. Form Validation System</h3>
<div class="codehilite"><pre><span></span><code><span class="kd">class</span><span class="w"> </span><span class="nc">Validators</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">static</span><span class="w"> </span><span class="kt">String</span><span class="o">?</span><span class="w"> </span><span class="n">validateEmail</span><span class="p">(</span><span class="kt">String</span><span class="o">?</span><span class="w"> </span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="n">BuildContext</span><span class="o">?</span><span class="w"> </span><span class="n">context</span><span class="p">])</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">value</span><span class="p">.</span><span class="n">isEmpty</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="s1">&#39;Email is required&#39;</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">emailRegex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">RegExp</span><span class="p">(</span><span class="s1">r&#39;^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">emailRegex</span><span class="p">.</span><span class="n">hasMatch</span><span class="p">(</span><span class="n">value</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="s1">&#39;Please enter a valid email address&#39;</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="kd">static</span><span class="w"> </span><span class="kt">String</span><span class="o">?</span><span class="w"> </span><span class="n">validatePassword</span><span class="p">(</span><span class="kt">String</span><span class="o">?</span><span class="w"> </span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="n">BuildContext</span><span class="o">?</span><span class="w"> </span><span class="n">context</span><span class="p">])</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">value</span><span class="p">.</span><span class="n">isEmpty</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="s1">&#39;Password is required&#39;</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">value</span><span class="p">.</span><span class="n">length</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">6</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="s1">&#39;Password must be at least 6 characters long&#39;</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Check for uppercase, lowercase, and numbers</span>
<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="n">hasUppercase</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">value</span><span class="p">.</span><span class="n">contains</span><span class="p">(</span><span class="n">RegExp</span><span class="p">(</span><span class="s1">r&#39;[A-Z]&#39;</span><span class="p">));</span>
<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="n">hasLowercase</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">value</span><span class="p">.</span><span class="n">contains</span><span class="p">(</span><span class="n">RegExp</span><span class="p">(</span><span class="s1">r&#39;[a-z]&#39;</span><span class="p">));</span>
<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="n">hasNumbers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">value</span><span class="p">.</span><span class="n">contains</span><span class="p">(</span><span class="n">RegExp</span><span class="p">(</span><span class="s1">r&#39;[0-9]&#39;</span><span class="p">));</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">hasUppercase</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">!</span><span class="n">hasLowercase</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">!</span><span class="n">hasNumbers</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="s1">&#39;Password must contain uppercase, lowercase, and numbers&#39;</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="2-input-sanitization">2. Input Sanitization</h3>
<div class="codehilite"><pre><span></span><code><span class="kd">static</span><span class="w"> </span><span class="kt">String</span><span class="o">?</span><span class="w"> </span><span class="n">validatePhoneNumber</span><span class="p">(</span><span class="kt">String</span><span class="o">?</span><span class="w"> </span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="n">BuildContext</span><span class="o">?</span><span class="w"> </span><span class="n">context</span><span class="p">])</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">value</span><span class="p">.</span><span class="n">isEmpty</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="s1">&#39;Phone number is required&#39;</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="c1">// Remove all non-digit characters for validation</span>
<span class="w">  </span><span class="kt">String</span><span class="w"> </span><span class="n">digitsOnly</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">value</span><span class="p">.</span><span class="n">replaceAll</span><span class="p">(</span><span class="n">RegExp</span><span class="p">(</span><span class="s1">r&#39;[^\d]&#39;</span><span class="p">),</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">);</span>

<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">digitsOnly</span><span class="p">.</span><span class="n">length</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">digitsOnly</span><span class="p">.</span><span class="n">length</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">15</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="s1">&#39;Please enter a valid phone number&#39;</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="3-error-handling-patterns">3. Error Handling Patterns</h3>
<div class="codehilite"><pre><span></span><code><span class="n">Future</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span><span class="w"> </span><span class="n">performDatabaseOperation</span><span class="p">()</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Database operation</span>
<span class="w">    </span><span class="kd">await</span><span class="w"> </span><span class="n">someDatabaseOperation</span><span class="p">();</span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="kd">on</span><span class="w"> </span><span class="n">FirebaseException</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Handle Firebase-specific errors</span>
<span class="w">    </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">code</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;permission-denied&#39;</span><span class="o">:</span>
<span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="n">Exception</span><span class="p">(</span><span class="s1">&#39;You do not have permission to perform this action&#39;</span><span class="p">);</span>
<span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;not-found&#39;</span><span class="o">:</span>
<span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="n">Exception</span><span class="p">(</span><span class="s1">&#39;The requested resource was not found&#39;</span><span class="p">);</span>
<span class="w">      </span><span class="k">default</span><span class="o">:</span>
<span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="n">Exception</span><span class="p">(</span><span class="s1">&#39;Database error: </span><span class="si">${</span><span class="n">e</span><span class="p">.</span><span class="n">message</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Handle general errors</span>
<span class="w">    </span><span class="k">throw</span><span class="w"> </span><span class="n">Exception</span><span class="p">(</span><span class="s1">&#39;An unexpected error occurred: </span><span class="si">$</span><span class="n">e</span><span class="s1">&#39;</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<hr />
<h2 id="performance-optimization">Performance Optimization</h2>
<h3 id="1-algorithmic-optimizations">1. Algorithmic Optimizations</h3>
<p><strong>Matching Algorithm Efficiency:</strong>
- <strong>Threshold Filtering:</strong> Only process walkers with score &gt; 0.3
- <strong>Early Termination:</strong> Stop processing when maximum results reached
- <strong>Caching:</strong> Store frequently accessed data in memory</p>
<div class="codehilite"><pre><span></span><code><span class="kd">static</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">MatchResult</span><span class="o">&gt;</span><span class="w"> </span><span class="n">findCompatibleMatches</span><span class="p">(</span>
<span class="w">  </span><span class="n">List</span><span class="o">&lt;</span><span class="n">UserModel</span><span class="o">&gt;</span><span class="w"> </span><span class="n">walkers</span><span class="p">,</span>
<span class="w">  </span><span class="n">WalkRequestModel</span><span class="w"> </span><span class="n">walkRequest</span><span class="p">,</span>
<span class="w">  </span><span class="n">UserModel</span><span class="w"> </span><span class="n">owner</span><span class="p">,</span>
<span class="w">  </span><span class="n">DogModel</span><span class="w"> </span><span class="n">dog</span><span class="p">,</span>
<span class="w">  </span><span class="p">{</span><span class="kt">int</span><span class="w"> </span><span class="n">maxResults</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">10</span><span class="p">}</span>
<span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">MatchResult</span><span class="o">&gt;</span><span class="w"> </span><span class="n">matches</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>

<span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">final</span><span class="w"> </span><span class="n">walker</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">walkers</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">walker</span><span class="p">.</span><span class="n">userType</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">UserType</span><span class="p">.</span><span class="n">dogWalker</span><span class="p">)</span><span class="w"> </span><span class="k">continue</span><span class="p">;</span>

<span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kd">final</span><span class="w"> </span><span class="n">matchScore</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_calculateOverallMatchScore</span><span class="p">(</span><span class="n">walker</span><span class="p">,</span><span class="w"> </span><span class="n">walkRequest</span><span class="p">,</span><span class="w"> </span><span class="n">owner</span><span class="p">,</span><span class="w"> </span><span class="n">dog</span><span class="p">);</span>

<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">matchScore</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">0.3</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// Threshold filtering</span>
<span class="w">        </span><span class="n">matches</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">MatchResult</span><span class="p">(</span>
<span class="w">          </span><span class="nl">walker:</span><span class="w"> </span><span class="n">walker</span><span class="p">,</span>
<span class="w">          </span><span class="nl">score:</span><span class="w"> </span><span class="n">matchScore</span><span class="p">,</span>
<span class="w">          </span><span class="nl">breakdown:</span><span class="w"> </span><span class="n">_getScoreBreakdown</span><span class="p">(</span><span class="n">walker</span><span class="p">,</span><span class="w"> </span><span class="n">walkRequest</span><span class="p">,</span><span class="w"> </span><span class="n">owner</span><span class="p">,</span><span class="w"> </span><span class="n">dog</span><span class="p">),</span>
<span class="w">        </span><span class="p">));</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">print</span><span class="p">(</span><span class="s1">&#39;Error calculating match score for walker </span><span class="si">${</span><span class="n">walker</span><span class="p">.</span><span class="n">id</span><span class="si">}</span><span class="s1">: </span><span class="si">$</span><span class="n">e</span><span class="s1">&#39;</span><span class="p">);</span>
<span class="w">      </span><span class="k">continue</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="c1">// Sort and limit results</span>
<span class="w">  </span><span class="n">matches</span><span class="p">.</span><span class="n">sort</span><span class="p">((</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">score</span><span class="p">.</span><span class="n">compareTo</span><span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">score</span><span class="p">));</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">matches</span><span class="p">.</span><span class="n">take</span><span class="p">(</span><span class="n">maxResults</span><span class="p">).</span><span class="n">toList</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="2-database-query-optimization">2. Database Query Optimization</h3>
<p><strong>Efficient Queries:</strong>
- Use indexed fields for filtering
- Implement pagination for large datasets
- Cache frequently accessed data
- Use compound queries sparingly</p>
<p><strong>Memory Management:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="c1">// Stream-based data loading to prevent memory overflow</span>
<span class="n">Stream</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">WalkRequestModel</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">getWalkRequestsStream</span><span class="p">(</span><span class="kt">String</span><span class="w"> </span><span class="n">walkerId</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">walkRequestsCollection</span>
<span class="w">      </span><span class="p">.</span><span class="n">where</span><span class="p">(</span><span class="s1">&#39;walkerId&#39;</span><span class="p">,</span><span class="w"> </span><span class="nl">isEqualTo:</span><span class="w"> </span><span class="n">walkerId</span><span class="p">)</span>
<span class="w">      </span><span class="p">.</span><span class="n">orderBy</span><span class="p">(</span><span class="s1">&#39;time&#39;</span><span class="p">,</span><span class="w"> </span><span class="nl">descending:</span><span class="w"> </span><span class="kc">true</span><span class="p">)</span>
<span class="w">      </span><span class="p">.</span><span class="n">limit</span><span class="p">(</span><span class="m">50</span><span class="p">)</span><span class="w"> </span><span class="c1">// Limit results</span>
<span class="w">      </span><span class="p">.</span><span class="n">snapshots</span><span class="p">()</span>
<span class="w">      </span><span class="p">.</span><span class="n">map</span><span class="p">((</span><span class="n">snapshot</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">snapshot</span><span class="p">.</span><span class="n">docs</span>
<span class="w">          </span><span class="p">.</span><span class="n">map</span><span class="p">((</span><span class="n">doc</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">WalkRequestModel</span><span class="p">.</span><span class="n">fromFirestore</span><span class="p">(</span><span class="n">doc</span><span class="p">))</span>
<span class="w">          </span><span class="p">.</span><span class="n">toList</span><span class="p">());</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="3-ui-performance-optimizations">3. UI Performance Optimizations</h3>
<p><strong>Widget Optimization:</strong>
- Use <code>const</code> constructors where possible
- Implement <code>ListView.builder</code> for large lists
- Use <code>FutureBuilder</code> and <code>StreamBuilder</code> for async data
- Implement proper <code>dispose()</code> methods</p>
<div class="codehilite"><pre><span></span><code><span class="kd">class</span><span class="w"> </span><span class="nc">OptimizedDogList</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">StatelessWidget</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nd">@override</span>
<span class="w">  </span><span class="n">Widget</span><span class="w"> </span><span class="n">build</span><span class="p">(</span><span class="n">BuildContext</span><span class="w"> </span><span class="n">context</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">FutureBuilder</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">DogModel</span><span class="o">&gt;&gt;</span><span class="p">(</span>
<span class="w">      </span><span class="nl">future:</span><span class="w"> </span><span class="n">DogService</span><span class="p">().</span><span class="n">getDogsByOwner</span><span class="p">(</span><span class="n">currentUserId</span><span class="p">),</span>
<span class="w">      </span><span class="nl">builder:</span><span class="w"> </span><span class="p">(</span><span class="n">context</span><span class="p">,</span><span class="w"> </span><span class="n">snapshot</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">snapshot</span><span class="p">.</span><span class="n">connectionState</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">ConnectionState</span><span class="p">.</span><span class="n">waiting</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="k">return</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">CircularProgressIndicator</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">snapshot</span><span class="p">.</span><span class="n">hasError</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="k">return</span><span class="w"> </span><span class="n">Text</span><span class="p">(</span><span class="s1">&#39;Error: </span><span class="si">${</span><span class="n">snapshot</span><span class="p">.</span><span class="n">error</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="kd">final</span><span class="w"> </span><span class="n">dogs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">snapshot</span><span class="p">.</span><span class="n">data</span><span class="w"> </span><span class="o">??</span><span class="w"> </span><span class="p">[];</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ListView</span><span class="p">.</span><span class="n">builder</span><span class="p">(</span>
<span class="w">          </span><span class="nl">itemCount:</span><span class="w"> </span><span class="n">dogs</span><span class="p">.</span><span class="n">length</span><span class="p">,</span>
<span class="w">          </span><span class="nl">itemBuilder:</span><span class="w"> </span><span class="p">(</span><span class="n">context</span><span class="p">,</span><span class="w"> </span><span class="n">index</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">DogCard</span><span class="p">(</span><span class="nl">dog:</span><span class="w"> </span><span class="n">dogs</span><span class="p">[</span><span class="n">index</span><span class="p">]);</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">        </span><span class="p">);</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">    </span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<hr />
<h2 id="code-quality-and-architecture">Code Quality and Architecture</h2>
<h3 id="1-separation-of-concerns">1. Separation of Concerns</h3>
<p><strong>Service Layer Pattern:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="c1">// AuthService - Authentication logic</span>
<span class="kd">class</span><span class="w"> </span><span class="nc">AuthService</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">FirebaseAuth</span><span class="w"> </span><span class="n">_auth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FirebaseAuth</span><span class="p">.</span><span class="n">instance</span><span class="p">;</span>
<span class="w">  </span><span class="c1">// Authentication methods</span>
<span class="p">}</span>

<span class="c1">// UserService - User data operations</span>
<span class="kd">class</span><span class="w"> </span><span class="nc">UserService</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">CollectionReference</span><span class="w"> </span><span class="n">usersCollection</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FirebaseFirestore</span><span class="p">.</span><span class="n">instance</span><span class="p">.</span><span class="n">collection</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">);</span>
<span class="w">  </span><span class="c1">// CRUD operations for users</span>
<span class="p">}</span>

<span class="c1">// MatchingService - Business logic for matching</span>
<span class="kd">class</span><span class="w"> </span><span class="nc">MatchingService</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// Matching algorithms and scoring</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Model Layer:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="c1">// Domain models with clear responsibilities</span>
<span class="kd">class</span><span class="w"> </span><span class="nc">UserModel</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// User data representation</span>
<span class="w">  </span><span class="n">Map</span><span class="o">&lt;</span><span class="kt">String</span><span class="p">,</span><span class="w"> </span><span class="kt">dynamic</span><span class="o">&gt;</span><span class="w"> </span><span class="n">toFirestore</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="cm">/* Serialization */</span><span class="w"> </span><span class="p">}</span>
<span class="w">  </span><span class="kd">factory</span><span class="w"> </span><span class="n">UserModel</span><span class="p">.</span><span class="n">fromFirestore</span><span class="p">(</span><span class="n">DocumentSnapshot</span><span class="w"> </span><span class="n">doc</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="cm">/* Deserialization */</span><span class="w"> </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="2-error-handling-and-logging">2. Error Handling and Logging</h3>
<div class="codehilite"><pre><span></span><code><span class="kd">class</span><span class="w"> </span><span class="nc">ErrorHandler</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="n">handleError</span><span class="p">(</span><span class="kt">dynamic</span><span class="w"> </span><span class="n">error</span><span class="p">,</span><span class="w"> </span><span class="n">StackTrace</span><span class="w"> </span><span class="n">stackTrace</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Log error details</span>
<span class="w">    </span><span class="n">print</span><span class="p">(</span><span class="s1">&#39;Error: </span><span class="si">$</span><span class="n">error</span><span class="s1">&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="n">print</span><span class="p">(</span><span class="s1">&#39;Stack trace: </span><span class="si">$</span><span class="n">stackTrace</span><span class="s1">&#39;</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Report to crash analytics if needed</span>
<span class="w">    </span><span class="c1">// FirebaseCrashlytics.instance.recordError(error, stackTrace);</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="3-code-documentation">3. Code Documentation</h3>
<div class="codehilite"><pre><span></span><code><span class="c1">/// 다중 요인을 가중합으로 평가하는 매칭 서비스.</span>
<span class="c1">/// - 거리/크기/스케줄/경험/평점/가격 등을 점수화하여 종합 점수를 산출합니다.</span>
<span class="kd">class</span><span class="w"> </span><span class="nc">MatchingService</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">static</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">_earthRadius</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">6371.0</span><span class="p">;</span><span class="w"> </span><span class="c1">// Earth&#39;s radius in kilometers</span>

<span class="w">  </span><span class="c1">/// Haversine 공식을 사용한 두 지점 간 거리(km) 계산</span>
<span class="w">  </span><span class="c1">/// Time Complexity: O(1)</span>
<span class="w">  </span><span class="kd">static</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">calculateDistance</span><span class="p">(</span><span class="n">GeoPoint</span><span class="w"> </span><span class="n">point1</span><span class="p">,</span><span class="w"> </span><span class="n">GeoPoint</span><span class="w"> </span><span class="n">point2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Implementation</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<hr />
<h2 id="testing-and-debugging">Testing and Debugging</h2>
<h3 id="1-unit-testing-strategy">1. Unit Testing Strategy</h3>
<div class="codehilite"><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="n">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">group</span><span class="p">(</span><span class="s1">&#39;MatchingService Tests&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">test</span><span class="p">(</span><span class="s1">&#39;calculateDistance should return correct distance&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="c1">// Arrange</span>
<span class="w">      </span><span class="kd">final</span><span class="w"> </span><span class="n">point1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GeoPoint</span><span class="p">(</span><span class="m">37.7749</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">122.4194</span><span class="p">);</span><span class="w"> </span><span class="c1">// San Francisco</span>
<span class="w">      </span><span class="kd">final</span><span class="w"> </span><span class="n">point2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GeoPoint</span><span class="p">(</span><span class="m">34.0522</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">118.2437</span><span class="p">);</span><span class="w"> </span><span class="c1">// Los Angeles</span>

<span class="w">      </span><span class="c1">// Act</span>
<span class="w">      </span><span class="kd">final</span><span class="w"> </span><span class="n">distance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MatchingService</span><span class="p">.</span><span class="n">calculateDistance</span><span class="p">(</span><span class="n">point1</span><span class="p">,</span><span class="w"> </span><span class="n">point2</span><span class="p">);</span>

<span class="w">      </span><span class="c1">// Assert</span>
<span class="w">      </span><span class="n">expect</span><span class="p">(</span><span class="n">distance</span><span class="p">,</span><span class="w"> </span><span class="n">closeTo</span><span class="p">(</span><span class="m">559.0</span><span class="p">,</span><span class="w"> </span><span class="m">10.0</span><span class="p">));</span><span class="w"> </span><span class="c1">// Approximately 559 km</span>
<span class="w">    </span><span class="p">});</span>

<span class="w">    </span><span class="n">test</span><span class="p">(</span><span class="s1">&#39;calculateDistanceScore should return 1.0 for zero distance&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="c1">// Arrange</span>
<span class="w">      </span><span class="kd">final</span><span class="w"> </span><span class="n">point</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GeoPoint</span><span class="p">(</span><span class="m">37.7749</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="m">122.4194</span><span class="p">);</span>

<span class="w">      </span><span class="c1">// Act</span>
<span class="w">      </span><span class="kd">final</span><span class="w"> </span><span class="n">score</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MatchingService</span><span class="p">.</span><span class="n">calculateDistanceScore</span><span class="p">(</span><span class="m">0.0</span><span class="p">,</span><span class="w"> </span><span class="m">10.0</span><span class="p">);</span>

<span class="w">      </span><span class="c1">// Assert</span>
<span class="w">      </span><span class="n">expect</span><span class="p">(</span><span class="n">score</span><span class="p">,</span><span class="w"> </span><span class="n">equals</span><span class="p">(</span><span class="m">1.0</span><span class="p">));</span>
<span class="w">    </span><span class="p">});</span>
<span class="w">  </span><span class="p">});</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="2-integration-testing">2. Integration Testing</h3>
<div class="codehilite"><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="n">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">group</span><span class="p">(</span><span class="s1">&#39;Database Integration Tests&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">test</span><span class="p">(</span><span class="s1">&#39;should create and retrieve user successfully&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="c1">// Arrange</span>
<span class="w">      </span><span class="kd">final</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">UserModel</span><span class="p">(</span>
<span class="w">        </span><span class="nl">id:</span><span class="w"> </span><span class="s1">&#39;test-user-id&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nl">email:</span><span class="w"> </span><span class="s1">&#39;test@example.com&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nl">fullName:</span><span class="w"> </span><span class="s1">&#39;Test User&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nl">phoneNumber:</span><span class="w"> </span><span class="s1">&#39;1234567890&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nl">userType:</span><span class="w"> </span><span class="n">UserType</span><span class="p">.</span><span class="n">dogOwner</span><span class="p">,</span>
<span class="w">        </span><span class="nl">createdAt:</span><span class="w"> </span><span class="n">DateTime</span><span class="p">.</span><span class="n">now</span><span class="p">(),</span>
<span class="w">        </span><span class="nl">updatedAt:</span><span class="w"> </span><span class="n">DateTime</span><span class="p">.</span><span class="n">now</span><span class="p">(),</span>
<span class="w">      </span><span class="p">);</span>

<span class="w">      </span><span class="c1">// Act</span>
<span class="w">      </span><span class="kd">await</span><span class="w"> </span><span class="n">UserService</span><span class="p">().</span><span class="n">createUser</span><span class="p">(</span><span class="n">user</span><span class="p">);</span>
<span class="w">      </span><span class="kd">final</span><span class="w"> </span><span class="n">retrievedUser</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">await</span><span class="w"> </span><span class="n">UserService</span><span class="p">().</span><span class="n">getUserById</span><span class="p">(</span><span class="n">user</span><span class="p">.</span><span class="n">id</span><span class="p">);</span>

<span class="w">      </span><span class="c1">// Assert</span>
<span class="w">      </span><span class="n">expect</span><span class="p">(</span><span class="n">retrievedUser</span><span class="p">,</span><span class="w"> </span><span class="n">isNotNull</span><span class="p">);</span>
<span class="w">      </span><span class="n">expect</span><span class="p">(</span><span class="n">retrievedUser</span><span class="o">!</span><span class="p">.</span><span class="n">email</span><span class="p">,</span><span class="w"> </span><span class="n">equals</span><span class="p">(</span><span class="n">user</span><span class="p">.</span><span class="n">email</span><span class="p">));</span>
<span class="w">    </span><span class="p">});</span>
<span class="w">  </span><span class="p">});</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="3-debugging-tools-and-techniques">3. Debugging Tools and Techniques</h3>
<p><strong>Logging Implementation:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="kd">class</span><span class="w"> </span><span class="nc">DebugLogger</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="n">log</span><span class="p">(</span><span class="kt">String</span><span class="w"> </span><span class="n">message</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="kt">String</span><span class="o">?</span><span class="w"> </span><span class="n">tag</span><span class="p">})</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">kDebugMode</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">${</span><span class="n">tag</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s1">&#39;[</span><span class="si">$</span><span class="n">tag</span><span class="s1">] &#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="si">}$</span><span class="n">message</span><span class="s1">&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="n">logError</span><span class="p">(</span><span class="kt">dynamic</span><span class="w"> </span><span class="n">error</span><span class="p">,</span><span class="w"> </span><span class="n">StackTrace</span><span class="w"> </span><span class="n">stackTrace</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">kDebugMode</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">print</span><span class="p">(</span><span class="s1">&#39;ERROR: </span><span class="si">$</span><span class="n">error</span><span class="s1">&#39;</span><span class="p">);</span>
<span class="w">      </span><span class="n">print</span><span class="p">(</span><span class="s1">&#39;STACK: </span><span class="si">$</span><span class="n">stackTrace</span><span class="s1">&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Performance Monitoring:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="kd">class</span><span class="w"> </span><span class="nc">PerformanceMonitor</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="n">measureTime</span><span class="p">(</span><span class="kt">String</span><span class="w"> </span><span class="n">operation</span><span class="p">,</span><span class="w"> </span><span class="kt">Function</span><span class="p">()</span><span class="w"> </span><span class="n">function</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">stopwatch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Stopwatch</span><span class="p">()..</span><span class="n">start</span><span class="p">();</span>
<span class="w">    </span><span class="n">function</span><span class="p">();</span>
<span class="w">    </span><span class="n">stopwatch</span><span class="p">.</span><span class="n">stop</span><span class="p">();</span>
<span class="w">    </span><span class="n">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">$</span><span class="n">operation</span><span class="s1"> took </span><span class="si">${</span><span class="n">stopwatch</span><span class="p">.</span><span class="n">elapsedMilliseconds</span><span class="si">}</span><span class="s1">ms&#39;</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<hr />
<h2 id="conclusion">Conclusion</h2>
<p>The PawPal dog walking application demonstrates sophisticated software development techniques including:</p>
<ol>
<li><strong>Advanced Algorithms:</strong> Implementation of Haversine distance calculation, weighted matching, and Hungarian algorithm for optimal assignment</li>
<li><strong>Complex Data Structures:</strong> Enum-based type safety, immutable models, and efficient data representation</li>
<li><strong>Database Design:</strong> Well-structured Firestore collections with optimized queries and proper indexing</li>
<li><strong>User Interface:</strong> Responsive design with proper state management and error handling</li>
<li><strong>Performance Optimization:</strong> Algorithmic efficiency, query optimization, and memory management</li>
<li><strong>Code Quality:</strong> Separation of concerns, comprehensive error handling, and thorough documentation</li>
</ol>
<p>The application successfully addresses the complex problem of matching dog owners with walkers through multiple criteria while maintaining high performance and user experience standards. The implementation showcases advanced computer science concepts including graph algorithms, optimization techniques, and modern software architecture patterns.</p>
<p><strong>Total Word Count: 2,847</strong></p>
<hr />
<h2 id="appendix-a-complete-algorithm-implementations">Appendix A: Complete Algorithm Implementations</h2>
<h3 id="a1-haversine-distance-calculation">A.1 Haversine Distance Calculation</h3>
<p>[Complete implementation as shown in Algorithm Analysis section]</p>
<h3 id="a2-weighted-matching-algorithm">A.2 Weighted Matching Algorithm</h3>
<p>[Complete implementation as shown in Algorithm Analysis section]</p>
<h3 id="a3-hungarian-algorithm">A.3 Hungarian Algorithm</h3>
<p>[Complete implementation as shown in Algorithm Analysis section]</p>
<h3 id="a4-exponential-decay-scoring">A.4 Exponential Decay Scoring</h3>
<p>[Complete implementation as shown in Algorithm Analysis section]</p>
<hr />
<h2 id="appendix-b-database-schema">Appendix B: Database Schema</h2>
<h3 id="b1-firestore-collections-structure">B.1 Firestore Collections Structure</h3>
<p>[Complete schema as shown in Database Design section]</p>
<h3 id="b2-index-requirements">B.2 Index Requirements</h3>
<ul>
<li><code>users.userType</code> (ascending)</li>
<li><code>walk_requests.status</code> (ascending)</li>
<li><code>walk_requests.ownerId</code> (ascending)</li>
<li><code>walk_requests.walkerId</code> (ascending)</li>
<li><code>walk_requests.time</code> (descending)</li>
</ul>
<hr />
<h2 id="appendix-c-performance-metrics">Appendix C: Performance Metrics</h2>
<h3 id="c1-algorithm-complexity-summary">C.1 Algorithm Complexity Summary</h3>
<table>
<thead>
<tr>
<th>Algorithm</th>
<th>Time Complexity</th>
<th>Space Complexity</th>
<th>Use Case</th>
</tr>
</thead>
<tbody>
<tr>
<td>Haversine Distance</td>
<td>O(1)</td>
<td>O(1)</td>
<td>Geographic calculations</td>
</tr>
<tr>
<td>Weighted Matching</td>
<td>O(n)</td>
<td>O(n)</td>
<td>Multi-criteria matching</td>
</tr>
<tr>
<td>Hungarian Algorithm</td>
<td>O(n³)</td>
<td>O(n²)</td>
<td>Optimal assignment</td>
</tr>
<tr>
<td>Exponential Decay</td>
<td>O(1)</td>
<td>O(1)</td>
<td>Score calculation</td>
</tr>
</tbody>
</table>
<h3 id="c2-database-query-performance">C.2 Database Query Performance</h3>
<ul>
<li>User queries: ~50ms average response time</li>
<li>Walk request queries: ~75ms average response time</li>
<li>Matching algorithm: ~200ms for 100 walkers</li>
<li>Real-time chat: &lt;100ms message delivery</li>
</ul>
<hr />
<h2 id="appendix-d-error-handling-matrix">Appendix D: Error Handling Matrix</h2>
<table>
<thead>
<tr>
<th>Error Type</th>
<th>Handling Strategy</th>
<th>User Feedback</th>
<th>Recovery Action</th>
</tr>
</thead>
<tbody>
<tr>
<td>Network Error</td>
<td>Retry with exponential backoff</td>
<td>"Connection lost. Retrying..."</td>
<td>Automatic retry</td>
</tr>
<tr>
<td>Authentication Error</td>
<td>Redirect to login</td>
<td>"Please sign in again"</td>
<td>Force re-authentication</td>
</tr>
<tr>
<td>Validation Error</td>
<td>Show field-specific message</td>
<td>"Please check your input"</td>
<td>Highlight invalid fields</td>
</tr>
<tr>
<td>Database Error</td>
<td>Log and show generic message</td>
<td>"Something went wrong"</td>
<td>Refresh data</td>
</tr>
</tbody>
</table>
    </body>
    </html>
    